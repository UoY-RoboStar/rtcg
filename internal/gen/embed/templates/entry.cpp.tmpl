{{/* The main entry point of the test. */}}
int main({{ block "main_args" . }}int argc, char** argv{{ end }})
{
  // Initialisation
{{- block "init" . }}
{{- end }}
{{- range .Stm.TransitionSets }}
{{-   block "callback_init" .Channel }}
{{- end }}
{{- end }}
  StateMachine stm { {{- block "stm_ctor_args" . -}}{{- end -}} };

  // Test loop
  {{ template "log" "info" }}("test {{ .Name }} running\n");
{{ template "spin" . }}

  auto status = stm.getStatus();
  {{ template "log" "info" }}("test {{ .Name }} finished: %s\n", rtcg::explain(status));
  stm.getVerdict().dump();

{{- block "cleanup" . }}
{{- end }}

  return rtcg::exitCode(status);
}