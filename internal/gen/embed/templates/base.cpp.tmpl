//
// Test {{ .Name }}
//
// Test autogenerated by rtcg on {{ .Date }}
//

{{- block "includes" . }}

// System includes
#include <array>
#include <cstring>
#include <stdlib.h>
#include <stdio.h>

#include "rtcg/rtcg.h" // Helper definitions (compile with rtcg/rtcg.cpp)

{{-   block "system_includes" . }}
{{-   end }}

// Includes for this model:
{{-   block "custom_includes" . }}
{{-   end }}
{{- end }}

//
// CONSTANTS
//

{{ block "constants" . }}
{{- end }}


//
// TESTS
//
// For non-factorised tests, there will likely only be one test captured by this test case.
//
{{ template "test_meta.cpp.tmpl" .Stm.Tests.Values }}


//
// VERDICTS
//
{{ template "verdict.cpp.tmpl" .Stm.Tests.Values }}


//
// STATES
//
{{ template "state_meta.cpp.tmpl" .Stm.States }}


//
// STATE MACHINE
//
{{ template "stm.cpp.tmpl" .Stm }}


int main({{ block "main_args" . }}int argc, char** argv{{ end }})
{
{{- block "body" . }}
  // Initialisation code
{{-   block "init" . }}
  StateMachine stm;
{{-   end }}

  // Test code
{{-   block "tester" . }}
{{ template "spin" . }}
{{-   end }}

  // Teardown code
{{-   block "aftermath" . }}
  {{ template "log" "info" }}("test finished due to %s\n", rtcg::explain(stm.getStatus()));

  stm.dumpVerdict();
{{-   end }}
{{- end }}
}